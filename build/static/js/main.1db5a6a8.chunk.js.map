{"version":3,"sources":["components/button/index.js","components/imageList/index.js","components/WaterMark/index.js","App.js","index.js"],"names":["Button","_ref","text","_react_16_8_6_react_default","a","createElement","className","ImageList","props","_this","_classCallCheck","this","_getPrototypeOf","call","_defineProperty","_assertThisInitialized","index","IMAGES","state","console","log","setState","map","v","i","_objectSpread","isSelected","src","thumbnail","caption","alt","React","PureComponent","imgs","thumbnailWidth","thumbnailHeight","Gallery_default","images","onSelectImage","WaterMark","document","image","str","bytesCount","n","length","c","charCodeAt","angle","canvas","ctx","getContext","leng","Math","sqrt","pow","getLength","width","height","translate","rotate","PI","font","fillStyle","fillText","toDataURL","body","appendChild","el","setWatermark","removeChild","isWatermark","ReactDOM","createPortal","style","position","top","left","zIndex","pointerEvents","backgroundImage","concat","watermark","window","App","src_components_button","components_imageList","components_WaterMark","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.1db5a6a8.chunk.js","sourcesContent":["import React from 'react';\nimport './index.css';\n\nconst Button = ({text}) => (<button className=\"wm-btn\">这是个按钮{text}</button>)\n\nexport default Button;","import React from 'react';\nimport Gallery from 'react-grid-gallery';\nimport './index.css';\n\nclass ImageList extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            IMAGES: [\n                {\n                    src: 'https://c2.staticflickr.com/9/8817/28973449265_07e3aa5d2e_b.jpg',\n                    thumbnail: 'https://c2.staticflickr.com/9/8817/28973449265_07e3aa5d2e_n.jpg',\n                    isSelected: true,\n                    caption: 'After Rain (Jeshu John - designerspics.com)',\n                },\n                {\n                    src: 'https://c2.staticflickr.com/9/8356/28897120681_3b2c0f43e0_b.jpg',\n                    thumbnail: 'https://c2.staticflickr.com/9/8356/28897120681_3b2c0f43e0_n.jpg',\n                    // tags: [{ value: 'Ocean', title: 'Ocean' }, { value: 'People', title: 'People' }],\n                    caption: 'Boats (Jeshu John - designerspics.com)',\n                },\n                {\n                    src: 'https://c4.staticflickr.com/9/8887/28897124891_98c4fdd82b_b.jpg',\n                    thumbnail: 'https://c4.staticflickr.com/9/8887/28897124891_98c4fdd82b_n.jpg',\n                    caption: 'Color Pencils (Jeshu John - designerspics.com)',\n                },\n                {\n                    src: 'https://c7.staticflickr.com/9/8546/28354329294_bb45ba31fa_b.jpg',\n                    thumbnail: 'https://c7.staticflickr.com/9/8546/28354329294_bb45ba31fa_n.jpg',\n                    caption: 'Red Apples with other Red Fruit (foodiesfeed.com)',\n                },\n                {\n                    src: 'https://c6.staticflickr.com/9/8890/28897154101_a8f55be225_b.jpg',\n                    thumbnail: 'https://c6.staticflickr.com/9/8890/28897154101_a8f55be225_n.jpg',\n                    caption: '37H (gratispgraphy.com)',\n                },\n                {\n                    src: 'https://c5.staticflickr.com/9/8768/28941110956_b05ab588c1_b.jpg',\n                    thumbnail: 'https://c5.staticflickr.com/9/8768/28941110956_b05ab588c1_n.jpg',\n                    // tags: [{ value: 'Nature', title: 'Nature' }],\n                    caption: '8H (gratisography.com)',\n                },\n                {\n                    src: 'https://c3.staticflickr.com/9/8583/28354353794_9f2d08d8c0_b.jpg',\n                    thumbnail: 'https://c3.staticflickr.com/9/8583/28354353794_9f2d08d8c0_n.jpg',\n                    caption: '286H (gratisography.com)',\n                },\n                {\n                    src: 'https://c7.staticflickr.com/9/8569/28941134686_d57273d933_b.jpg',\n                    thumbnail: 'https://c7.staticflickr.com/9/8569/28941134686_d57273d933_n.jpg',\n                    // tags: [{ value: 'People', title: 'People' }],\n                    caption: '315H (gratisography.com)',\n                },\n                {\n                    src: 'https://c6.staticflickr.com/9/8342/28897193381_800db6419e_b.jpg',\n                    thumbnail: 'https://c6.staticflickr.com/9/8342/28897193381_800db6419e_n.jpg',\n                    caption: '201H (gratisography.com)',\n                },\n                {\n                    src: 'https://c2.staticflickr.com/9/8239/28897202241_1497bec71a_b.jpg',\n                    alt: 'Big Ben - London',\n                    thumbnail: 'https://c2.staticflickr.com/9/8239/28897202241_1497bec71a_n.jpg',\n                    caption: 'Big Ben (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c7.staticflickr.com/9/8785/28687743710_3580fcb5f0_b.jpg',\n                    alt: 'Red Zone - Paris',\n                    thumbnail: 'https://c7.staticflickr.com/9/8785/28687743710_3580fcb5f0_n.jpg',\n                    // tags: [{ value: 'People', title: 'People' }],\n                    caption: 'Red Zone - Paris (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c6.staticflickr.com/9/8520/28357073053_cafcb3da6f_b.jpg',\n                    alt: 'Wood Glass',\n                    thumbnail: 'https://c6.staticflickr.com/9/8520/28357073053_cafcb3da6f_n.jpg',\n                    caption: 'Wood Glass (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c8.staticflickr.com/9/8104/28973555735_ae7c208970_b.jpg',\n                    thumbnail: 'https://c8.staticflickr.com/9/8104/28973555735_ae7c208970_n.jpg',\n                    caption: 'Flower Interior Macro (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c4.staticflickr.com/9/8562/28897228731_ff4447ef5f_b.jpg',\n                    thumbnail: 'https://c4.staticflickr.com/9/8562/28897228731_ff4447ef5f_n.jpg',\n                    caption: 'Old Barn (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c2.staticflickr.com/8/7577/28973580825_d8f541ba3f_b.jpg',\n                    alt: 'Cosmos Flower',\n                    thumbnail: 'https://c2.staticflickr.com/8/7577/28973580825_d8f541ba3f_n.jpg',\n                    caption: 'Cosmos Flower Macro (Tom Eversley - isorepublic.com)',\n                },\n                {\n                    src: 'https://c4.staticflickr.com/9/8887/28897124891_98c4fdd82b_b.jpg',\n                    thumbnail: 'https://c4.staticflickr.com/9/8887/28897124891_98c4fdd82b_n.jpg',\n                },\n            ],\n        };\n    }\n    onSelectImage = index => {\n        const { IMAGES } = this.state;\n        console.log('IMAGES=====', IMAGES);\n        this.setState({\n            IMAGES: IMAGES.map((v, i) => (i === index ? { ...v, isSelected: true } : v)),\n        });\n    };\n    render() {\n        const imgs = this.state.IMAGES.map(v => ({\n            ...v,\n            thumbnailWidth: 200,\n            thumbnailHeight: 200,\n        }));\n        return <Gallery images={imgs} onSelectImage={this.onSelectImage} />;\n    }\n}\n\nexport default ImageList;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass WaterMark extends React.PureComponent {\n    static defaultProps = {\n        text: '请设置水印文字',\n        isWatermark: false,\n        angle: -30,\n    };\n\n    el = document.createElement('div');\n\n    state = {\n        image: '',\n    };\n\n    componentDidMount() {\n        document.body.appendChild(this.el);\n        const { text } = this.props;\n        this.setWatermark(text);\n    }\n\n    componentDidUpdate() {\n        const { text } = this.props;\n        this.setWatermark(text);\n    }\n\n    componentWillUnmount() {\n        document.body.removeChild(this.el);\n    }\n\n    getLength =(str)=> {  \n        // const str = new String(val);  \n        let bytesCount = 0;  \n        for (let i = 0 ,n = str.length; i < n; i++) {  \n            let c = str.charCodeAt(i);  \n            if ((c >= 0x0001 && c <= 0x007e) || (0xff60<=c && c<=0xff9f)) {  \n                bytesCount += 1;  \n            } else {  \n                bytesCount += 2;  \n            }  \n        }  \n        return bytesCount;  \n    }  \n\n    setWatermark = text => {\n        const { angle } = this.props;\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const leng = Math.sqrt((32 * this.getLength(text)) ** 2, 32 ** 2) + 32 * 4;\n        canvas.width = leng;\n        canvas.height = leng / 2 + 32 * 2;\n        ctx.translate(leng / 2, leng / 4);\n        ctx.rotate((angle * Math.PI) / 180);\n        ctx.font = '32px Arial';\n        ctx.fillStyle = 'rgba(127, 127, 127, .3)';\n        ctx.fillText(text, -leng / 2 + 32 * 2, 0);\n        const image = canvas.toDataURL('image/png', 1);\n        this.setState({\n            image,\n        });\n    };\n\n    render() {\n        const { isWatermark } = this.props;\n        const { image } = this.state;\n        if (isWatermark) {\n            return ReactDOM.createPortal(\n                <div\n                    style={{\n                        position: 'fixed',\n                        top: 0,\n                        left: 0,\n                        zIndex: 99999,\n                        pointerEvents: 'none',\n                        width: '100vw',\n                        height: '100vh',\n                        backgroundImage: `url(${image})`,\n                    }}\n                />,\n                this.el,\n            );\n        }\n        return null;\n    }\n}\n\nconst watermark = new WaterMark();\nwindow.watermark = watermark;\n\nexport default WaterMark;\n","import React from 'react';\nimport { Button, ImageList, WaterMark } from './components';\n\nconst App = () => (\n    <div className=\"App\">\n        hello<Button text={'hello'} />\n        <ImageList />\n        <WaterMark text={'王晓刚'} isWatermark />\n    </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}